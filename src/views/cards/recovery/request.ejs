<div class="wrapper flex-container flex-container-vertical">
    <div class="container-medium-width container-filled-background">

        <h1><%= __('Request recovery') %></h1>
    
        <form class="form" autocomplete="off" action="" method="post">
        <input type="hidden" value="<%= csrfToken %>" name="_csrf">
    
        <fieldset>

            <% if (errorMsg) { %>
            <%- include("../../partials/alert-info.error.ejs",{info: __(errorMsg),moreInfoLink: false}) %> 
            <% } %>

            <div class="form-group">
            <label class="label"><%= __('Your Username') %></label>
            <input class="input-field" required type="text" name="username"/>
            </div>

            <div class="form-group" >
            <label class="label"><%= __('Recovery Method') %></label> 
            <select class="select" name="method" id="recoverySelect">
                <option disabled selected value="none" style="display:none"><%= __('-- select a method --') %></option>
                <option value="email"><%= __('Recovery Email') %></option>
                <option value="token"><%= __('Recovery Token') %></option>
            </select>
            </div>
            
            <div id="recoveryEmailSection" class="form-group">
            <label class="label"><%= __('Recovery Email') %></label> 
            <input class="input-field" type="email" name="email"/>
            </div>
            
            <div id="recoveryTokenSection" class="form-group">
            <label class="label"><%= __('Recovery Token') %></label> 
            <input class="input-field" type="text"name="token"/>
            </div>

        </fieldset>

        <div class="form-action-group">
            <div class="button-group">
            <button type="submit" class="button primary"><%= __('Request') %></button>
            </div>
            <p><%= __('No recovery methods?') %> <a href=""><%= __('Learn more') %></a></p>
        </div>

        </form>

    </div>

</div>

<script>
    document.getElementById("recoverySelect").addEventListener("change",updateRecovery)
    updateRecovery()
    function updateRecovery () {
        selected = document.getElementById('recoverySelect').value
        document.getElementById('recoveryEmailSection').style.display = selected == "email" ? "" : "none";
        document.getElementById('recoveryTokenSection').style.display = selected == "token" ? "": "none";
    }
</script>  