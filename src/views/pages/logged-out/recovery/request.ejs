<div class="wrapper flex-container flex-container-vertical">
    <div class="container-medium-width container-filled-background">

        <h1><%= __('recovery.request_title') %></h1>
    
        <form class="form" autocomplete="off" action="<%= urlUtils.extendUrl(baseUrl,`account-recovery`,`request`).href %>" method="post">
        <input type="hidden" value="<%= csrfToken %>" name="_csrf">
    
        <fieldset>

            <div class="form-group">
                <label class="label"><%= __('user.username') %></label>
                <%- include("../../../partials/form/input-field.ejs",{field: {name:"username",type:"text",required:true}}) %> 
            </div>

            <div class="form-group" >
                <label class="label"><%= __('recovery.method') %></label> 
                <%- include("../../../partials/form/input-select.ejs",{select: {name:"method",id:"recoverySelect",options:[
                    {value:"email",displayName:__('recovery.email')},
                    {value:"token",displayName:__('recovery.token')}
                ],defaultNone:{msg:__('recovery.select_method')}}}) %>
            </div>
            
            <div id="recoveryEmailSection" class="form-group">
                <label class="label"><%= __('recovery.email') %></label> 
                <%- include("../../../partials/form/input-field.ejs",{field: {name:"email",type:"email"}}) %> 
            </div>
            
            <div id="recoveryTokenSection" class="form-group">
                <label class="label"><%= __('recovery.token') %></label> 
                <%- include("../../../partials/form/input-field.ejs",{field: {name:"token",type:"text"}}) %> 
            </div>

            <%- include("../../../partials/form/errors.ejs") %> 

        </fieldset>

        <div class="form-action-group">
            <div class="button-group">
                <button type="submit" class="button primary"><%= __('form.request') %></button>
            </div>
            <p><%= __('recovery.no_methods') %> <a href=""><%= __('recovery.learn_more') %></a></p>
        </div>

        </form>

    </div>

</div>

<script>
    document.getElementById("recoverySelect").addEventListener("change",updateRecovery)
    updateRecovery()
    function updateRecovery () {
        selected = document.getElementById('recoverySelect').value
        document.getElementById('recoveryEmailSection').style.display = selected == "email" ? "" : "none";
        document.getElementById('recoveryTokenSection').style.display = selected == "token" ? "": "none";
    }
</script>  
